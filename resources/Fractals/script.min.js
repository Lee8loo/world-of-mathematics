/* (c) 2016 Mathigon */
scripts.Fractals=function(){function fracAuto(){for(var i=1;15>i;i++)for(var j=0;23>j;j++){var temp=($("#fracTableRow"+(i-1)+" #fracTableCell"+(j-1)).hasClass("on")?"1":"0")+($("#fracTableRow"+(i-1)+" #fracTableCell"+j).hasClass("on")?"1":"0")+($("#fracTableRow"+(i-1)+" #fracTableCell"+(j+1)).hasClass("on")?"1":"0");if("000"==temp)var colour=$("#fracRule1").hasClass("on")?1:0;else if("001"==temp)var colour=$("#fracRule2").hasClass("on")?1:0;else if("010"==temp)var colour=$("#fracRule3").hasClass("on")?1:0;else if("011"==temp)var colour=$("#fracRule4").hasClass("on")?1:0;else if("100"==temp)var colour=$("#fracRule5").hasClass("on")?1:0;else if("101"==temp)var colour=$("#fracRule6").hasClass("on")?1:0;else if("110"==temp)var colour=$("#fracRule7").hasClass("on")?1:0;else if("111"==temp)var colour=$("#fracRule8").hasClass("on")?1:0;else var colour=0;colour?$("#fracTableRow"+i+" #fracTableCell"+j).addClass("on"):$("#fracTableRow"+i+" #fracTableCell"+j).removeClass("on")}}function inMandel(x,y){var x1=10*x+15,x2=10*y+10,array=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0]];return array[[x2]][[x1]]}function mandelComplex(b,x,y){var x1=Math.round(100*x)/100,y1=Math.round(100*y)/100;return y1?x1?0>y1?(b?"(":"")+(0>x1?"&#8211;"+String(-x1):String(x1))+" &#8211; "+-y1+"<em>i</em>"+(b?")":""):(b?"(":"")+(0>x1?"&#8211;"+String(-x1):String(x1))+" + "+y1+"<em>i</em>"+(b?")":""):0>y1?"&#8211;"+String(-y1)+"<em>i</em>":String(y1)+"<em>i</em>":0>x1?"&#8211;"+String(-x1):String(x1)}$("#fracPascalButoon").click(function(){$("#fracPascal2").css("opacity","1"),$("#fracPascalButoon").fadeOut(1e3),setTimeout(function(){$("#fracPascalDesc").fadeIn(1e3)},1010)}),$(".fracAutoRule").click(function(){$(this).toggleClass("on"),fracAuto()});for(var fracAutoTableString="",i=0;15>i;i++){fracAutoTableString+="<tr id='fracTableRow"+i+"'>";for(var j=0;23>j;j++)fracAutoTableString+="<td id='fracTableCell"+j+"'></td>";fracAutoTableString+="</tr>"}$("#fracAutoTable").html(fracAutoTableString),$("#fracTableRow0 #fracTableCell11").addClass("on");var mandelOn=1,mandelMove=1;for(i=1;20>i;i++)$("#mandelWrap").append('<div class="mandelImg" id="mandel'+i+'" style="background-image: url(resources/Fractals/mandel/mandel'+i+'.jpg)"></div>');$("#mandelWrap").append('<div id="mandelScale" class="sansSerif">&times 1</div><div id="mandelPlus"></div><div id="mandelMinus"></div>'),$("#mandel1").addClass("mandelOn"),$("#mandel2").addClass("mandelNext"),$("#mandel3").addClass("mandelNext2"),$("#mandelPlus").click(function(){19>mandelOn&&mandelMove&&(mandelMove=0,mandelOn++,$("#mandelScale").html("&times "+Math.pow(4,mandelOn-1)),$("#mandel"+(mandelOn-2)).removeClass("mandelPrev").addClass("mandelPrev2"),$("#mandel"+(mandelOn-1)).removeClass("mandelOn").addClass("mandelPrev"),$("#mandel"+mandelOn).removeClass("mandelNext").addClass("mandelOn"),$("#mandel"+(mandelOn+1)).removeClass("mandelNext2").addClass("mandelNext"),$("#mandel"+(mandelOn+2)).addClass("mandelNext2"),setTimeout(function(){mandelMove=1},800))}),$("#mandelMinus").click(function(){mandelOn>1&&mandelMove&&(mandelMove=0,mandelOn--,$("#mandelScale").html("&times "+Math.pow(4,mandelOn-1)),$("#mandel"+(mandelOn-2)).addClass("mandelPrev2"),$("#mandel"+(mandelOn-1)).removeClass("mandelPrev2").addClass("mandelPrev"),$("#mandel"+mandelOn).removeClass("mandelPrev").addClass("mandelOn"),$("#mandel"+(mandelOn+1)).removeClass("mandelOn").addClass("mandelNext"),$("#mandel"+(mandelOn+2)).removeClass("mandelNext").addClass("mandelNext2"),$("#mandel"+(mandelOn+3)).removeClass("mandelNext2"),setTimeout(function(){mandelMove=1},800))}),scripts.require("scripts/jqueryUI-110.js",function(){$("#mandelTarget").draggable({containment:"#mandelMove",scroll:!1,drag:function(){var x=Math.round(10*($("#mandelTarget").position().left/$("#mandelMove").width()*2.915-1.648))/10,y=Math.round(10*(1.113-$("#mandelTarget").position().top/$("#mandelMove").height()*2.203))/10;$("#mandelCalculation .red").html(mandelComplex(0,x,y)),$("#mandelCalculation #green1").html(mandelComplex(0,x,y)),$("#mandelCalculation #green2").html(mandelComplex(1,x,y)),$("#mandelCalculation #cyan1").html(mandelComplex(0,x*x-y*y+x,y*(1+2*x))),$("#mandelCalculation #cyan2").html(mandelComplex(1,x*x-y*y+x,y*(1+2*x))),$("#mandelCalculation #blue1").html(mandelComplex(0,x*(1+x*(1+2*x+x*x))+y*y*(y*y-(1+6*x*(1+x))),y*(1+2*x*(1+3*x+2*x*x)-2*y*y*(1+2*x)))),$("#mandelCalculation #blue2").html(mandelComplex(1,x*(1+x*(1+2*x+x*x))+y*y*(y*y-(1+6*x*(1+x))),y*(1+2*x*(1+3*x+2*x*x)-2*y*y*(1+2*x)))),$("#fracTargetFinal").html(mandelComplex(0,x*(1+x)*(1+x*x*(1+x)*(2+x)*(1+x*x))-(1+2*x*(3+x*(15+x*(30+x*(45+14*x*(3+x))))))*y*y+y*y*y*y*(5*(1+2*x*(3+x*(9+7*x*(2+x))))-2*(3+14*x*(1+x))*y*y+y*y*y*y),y*(1+2*x*(1+x*(1+2*x+x*x))*(1+2*x*(1+x)*(1+2*x))-2*y*y*(1+2*x*(5+x*(15+x*(30+7*x*(5+2*x))))-y*y*(3+2*x*(9+7*x*(3+2*x)))+2*y*y*y*y*(1+2*x))))),inMandel(x,y)?($("#MandelIn").css("display","none"),$("#MandelNo").css("display","block")):($("#MandelIn").css("display","block"),$("#MandelNo").css("display","none"))}})})};