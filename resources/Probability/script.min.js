/* (c) 2016 Mathigon */
function DiceTable(n){for(var probs=diceP[n],pmax=Number(probs[Math.round(7*n/2)])+.01,t="<tr>",i=n;6*n>=i;i++)t+='<td><span class="dice sansSerif">'+String(i)+"</span></td>";t+="</tr>",t+='<tr class="green">';for(var i=n;6*n>=i;i++)t+="<td>"+probs[i]+"</td>";t+="</tr>",t+='<tr class="lblue">';for(var i=n;6*n>=i;i++)t+='<td id="dc1'+String(i)+'">0</td>';t+="</tr>",t+="<tr>";for(var i=n;6*n>=i;i++)t+='<td><div class="pBox"><div class="diceCount" id="dc2'+String(i)+'"></div><div class="diceProb" style="bottom: '+String(probs[i]/pmax*100)+'%"></div></div></td>';t+="</tr>",$("#probTable").html(t);for(var i=0;60>=i;i++)diceHits[i]=0;hitsTotal=0}function probChoose(p,x){for(var count=0,i=1;60>i;i++)if(count+=p[i],count>=x)return i}function rollDice(p,d){var x=probChoose(p,Math.random());diceHits[x]=diceHits[x]?diceHits[x]+1:1;for(var hitsMax=Math.max.apply(Math,diceHits),i=d;6*d>=i;i++)$("#dc1"+String(i)).html(String(diceHits[i])),$("#dc2"+String(i)).css("height",diceHits[i]/hitsMax*100+"%")}var diceHits=[],diceP={1:[0,.17,.17,.17,.17,.17,.17],2:[0,0,.028,.056,.083,.11,.14,.17,.14,.11,.083,.056,.028],3:[0,0,0,.0046,.014,.028,.046,.069,.097,.12,.13,.13,.12,.097,.069,.046,.028,.014,.0046],4:[0,0,0,0,77e-5,.0031,.0077,.015,.027,.043,.062,.08,.096,.11,.11,.11,.096,.08,.062,.043,.027,.015,.0077,.0031,77e-5],5:[0,0,0,0,0,13e-5,64e-5,.0019,.0045,.009,.016,.026,.039,.054,.069,.084,.095,.1,.1,.095,.084,.069,.054,.039,.026,.016,.009,.0045,.0019,64e-5,13e-5],6:[0,0,0,0,0,0,21e-6,13e-5,45e-5,.0012,.0027,.0054,.0098,.016,.025,.036,.048,.061,.074,.084,.09,.093,.09,.084,.074,.061,.048,.036,.025,.016,.0098,.0054,.0027,.0012,45e-5,13e-5,21e-6]};scripts.Probability=function(){function randomCircles(){var c=document.getElementById("randomCircles"),ctx=c.getContext("2d");for(ctx.clearRect(0,0,600,600),i=0;50>i;i++){var r=Math.floor(100*Math.random()),c1=r+Math.floor(Math.random()*(600-2*r)),c2=r+Math.floor(Math.random()*(600-2*r)),x1=Math.floor(255*Math.random()),x2=Math.floor(255*Math.random()),x3=Math.floor(255*Math.random());ctx.beginPath(),ctx.arc(c1,c2,r,0,2*Math.PI,!1),ctx.fillStyle="rgba("+x1+","+x2+","+x3+",0.4)",ctx.fill()}}function decay(){var tx=-2e4*Math.log(1-Math.random())/RadioN,Atoms=$(".Atom.on"),which=Math.floor(Math.random()*Atoms.length);setTimeout(function(){$(".Atom.on:eq("+which+")").removeClass("on"),RadioN--,RadioN>0&&decay()},tx)}DiceTable(2),$("#rollOnce").click(function(){var d=V.Dice;rollDice(diceP[d],d)}),$("#roll100").click(function(){var d=V.Dice,p=diceP[d];for(i=0;100>i;i++)setTimeout(function(){rollDice(p,d)},100*i)}),$("#roll1000").click(function(){var d=V.Dice,p=diceP[d];for(i=0;1e3>i;i++)setTimeout(function(){rollDice(p,d)},10*i)}),randomCircles(),$("#randomCircles, #randomCircleRefresh").click(function(){return randomCircles(),!1});for(var $radio=$("#Radioactive"),i=0;15>i;i++)for(var j=0;10>j;j++)$radio.append('<div id="radio'+i+"-"+j+'" class="Atom on" style="left: '+6.667*i+"%; top: "+10*j+'%"></div>');var RadioN=150;$("#RadioBox").click(function(){$("#RadioBox .AnimationBar").hasClass("off")||($("#RadioBox .AnimationBar").addClass("off"),decay())})};